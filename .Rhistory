head(max_list)
max_list <- other_var("C:\\Users\\bean_student\\Documents\\GraphData\\all_data",
"_r\\da", 5, "max")
head(max_list)
tail(max_list)
N <- names(wind_list)
for (i in seq_along(N)){
write.table(wind_list[[i]], file=N[i], row.names = FALSE, col.names = TRUE,
sep=",")
}
max_list <- other_var("C:\\Users\\bean_student\\Documents\\GraphData\\all_data",
"_r\\da", 5, "max")
head(max_list)
tail(max_list)
avg_list <- other_var("C:\\Users\\bean_student\\Documents\\GraphData\\all_data",
"_r\\db", 5, "avg")
length(avg_list)
avg_list <- other_var("C:\\Users\\bean_student\\Documents\\GraphData\\all_data",
"_r\\db", 5, "avg")
list.files("C:\\Users\\bean_student\\Documents\\GraphData\\all_data",
"_r\\db", full.names = TRUE)
avg_list <- other_var("C:\\Users\\bean_student\\Documents\\GraphData\\all_data",
"_r\\db", 5, "avg")
folder_path <- "C:\\Users\\bean_student\\Documents\\GraphData\\all_data"
pattern <- "_r\\db"
column <- 5
varval <- avg
varval <- "avg"
# Get the list of CSV files in the folder
roof_files <- list.files(path = folder_path, pattern = pattern, full.names = TRUE)
# Create an empty list to store the data frames
data_frames <- list()
roof_files
# Loop through each CSV file and read it as a data frame
for (file in roof_files) {
data_frames[[file]] <- read.csv(file)
}
# Get the list of CSV files in the folder
roof_files <- list.files(path = folder_path, pattern = pattern, full.names = TRUE)
# Create an empty list to store the data frames
data_frames <- list()
# Loop through each CSV file and read it as a data frame
for (file in roof_files) {
data_frames[[file]] <- read.csv(file)
}
head(data_frames)
for (i in seq_along(data_frames)){
data_frames[[i]][,column] <- varval
}
devtools::document()
avg_list <- other_var("C:\\Users\\bean_student\\Documents\\GraphData\\all_data",
"_r\\db", 5, "avg")
head(avg_list)
tail(avg_list)
N <- names(avg_list)
for (i in seq_along(N)){
write.table(avg_list[[i]], file=N[i], row.names = FALSE, col.names = TRUE,
sep=",")
}
min_list <- other_var("C:\\Users\\bean_student\\Documents\\GraphData\\all_data",
"_r\\dc", 5, "min")
head(min_list)
tail(min_list)
N <- names(min_list)
for (i in seq_along(N)){
write.table(min_list[[i]], file=N[i], row.names = FALSE, col.names = TRUE,
sep=",")
}
max_list <- other_var("C:\\Users\\bean_student\\Documents\\GraphData\\all_data",
"_r\\da", 5, "max")
head(max_list)
tail(max_list)
N <- names(max_list)
for (i in seq_along(N)){
write.table(max_list[[i]], file=N[i], row.names = FALSE, col.names = TRUE,
sep=",")
}
folder_path <- "C:\Users\bean_student\Documents\GraphData\all_data"
folder_path <- "C:/Users/bean_student/Documents/GraphData/all_data"
pattern <- "_[[:alpha:]]{3,}$"
# Get the list of CSV files in the folder
data_files <- list.files(path = folder_path, pattern = pattern, full.names = TRUE)
data_files
folder_path <- "C:/Users/bean_student/Documents/GraphData/all_data"
pattern <- "_[[:alpha:]]{3,}\\.csv"
# Get the list of CSV files in the folder
data_files <- list.files(path = folder_path, pattern = pattern, full.names = TRUE)
data_files
# Create an empty list to store the data frames
data_frames <- list()
# Loop through each CSV file and read it as a data frame
for (file in roof_files) {
data_frames[[file]] <- read.csv(file)
}
# Loop through each CSV file and read it as a data frame
for (file in data_files) {
data_frames[[file]] <- read.csv(file)
}
for (i in seq_along(data_frames)){
colnames(data_frames[[i]])[4] <- "city_code"
}
head(data_frames)
N <- names(data_frames)
N
for (i in seq_along(N)){
write.table(data_frames[[i]], file=N[i], row.names = FALSE, col.names = TRUE,
sep=",")
}
folder_path <- "C:/Users/bean_student/Documents/GraphData/all_data"
pattern <- "_[[:alpha:]]\\d[[:alpha:]]?\\.csv"
# Get the list of CSV files in the folder
data_files <- list.files(path = folder_path, pattern = pattern, full.names = TRUE)
data_files
# Loop through each CSV file and read it as a data frame
for (file in data_files) {
data_frames[[file]] <- read.csv(file)
}
head(data_frames)
for (i in seq_along(data_frames)){
data_frames[[i]][,6] <- data_frames[[i]][,4]
}
head(data_frames)
folder_path <- "C:/Users/bean_student/Documents/GraphData/all_data"
pattern <- "_[[:alpha:]]\\d[[:alpha:]]?\\.csv"
# Get the list of CSV files in the folder
data_files <- list.files(path = folder_path, pattern = pattern, full.names = TRUE)
# Create an empty list to store the data frames
data_frames <- list()
# Loop through each CSV file and read it as a data frame
for (file in data_files) {
data_frames[[file]] <- read.csv(file)
}
for (i in seq_along(data_frames)){
data_frames[[i]][,6] <- data_frames[[i]][,4]
}
head(data_frames)
####################### Adding city code to other data. ########################
library(stringr)
####################### Adding city code to other data. ########################
library(stringr)
folder_path <- "C:/Users/bean_student/Documents/GraphData/all_data"
pattern <- "_[[:alpha:]]\\d[[:alpha:]]?\\.csv"
# Get the list of CSV files in the folder
data_files <- list.files(path = folder_path, pattern = pattern, full.names = TRUE)
# Create an empty list to store the data frames
data_frames <- list()
# Loop through each CSV file and read it as a data frame
for (file in data_files) {
data_frames[[file]] <- read.csv(file)
}
for (i in seq_along(data_frames)){
data_frames[[i]][,6] <- data_frames[[i]][,4]
data_frames[[i]][,4] <- str_sub(data_frames[[i]][,4], 1, -3)
}
head(data_frames)
folder_path <- "C:/Users/bean_student/Documents/GraphData/all_data"
pattern <- "_[[:alpha:]]\\d[[:alpha:]]?\\.csv"
# Get the list of CSV files in the folder
data_files <- list.files(path = folder_path, pattern = pattern, full.names = TRUE)
# Create an empty list to store the data frames
data_frames <- list()
# Loop through each CSV file and read it as a data frame
for (file in data_files) {
data_frames[[file]] <- read.csv(file)
}
for (i in seq_along(data_frames)){
data_frames[[i]][,6] <- data_frames[[i]][,4]
data_frames[[i]][,4] <- str_sub(data_frames[[i]][,4], 1, -3)
colnames(data_frames[[i]])[4] <- "city_code"
colnames(data_frames[[i]])[6] <- "building_code"
}
head(data_frames)
N <- names(data_frames)
for (i in seq_along(N)){
write.table(data_frames[[i]], file=N[i], row.names = FALSE, col.names = TRUE,
sep=",")
}
######################## binding all data #####################################
folder_path <- "C:/Users/bean_student/Documents/GraphData/all_data"
pattern <- "*.csv"
# Get the list of CSV files in the folder
data_files <- list.files(path = folder_path, pattern = pattern, full.names = TRUE)
data_files
# Create an empty list to store the data frames
data_frames <- list()
# Loop through each CSV file and read it as a data frame
for (file in data_files) {
data_frames[[file]] <- read.csv(file)
}
######################## binding all data #####################################
library(dplyr)
folder_path <- "C:/Users/bean_student/Documents/GraphData/all_data"
pattern <- "*.csv"
# Get the list of CSV files in the folder
data_files <- list.files(path = folder_path, pattern = pattern, full.names = TRUE)
# Create an empty list to store the data frames
data_frames <- list()
# Loop through each CSV file and read it as a data frame
for (file in data_files) {
data_frames[[file]] <- read.csv(file)
}
complete_data <- bind_rows(data_frames)
View(complete_data)
write.table(complete_data,
file = "C:\\Users\\bean_student\\Documents\\GraphData\\complete_data.csv",
row.names = FALSE,
col.names = TRUE,
sep=",")
complete_data$date <- as.Date(complete_data)
complete_data$date <- as.Date(complete_data$date)
head(as.Date(complete_data$date))
complete_data$date <- as.Date(complete_data$date)
data <- read.csv("C:\\Users\\bean_student\\Documents\\GraphData\\complete_data.csv")
data$date <- as.Date(data$date)
data <- read.csv("C:\\Users\\bean_student\\Documents\\GraphData\\complete_data.csv")
data$date <- as.Date(data$date)
View(data)
data <- read.csv("C:\\Users\\bean_student\\Documents\\GraphData\\complete_data.csv")
data1 <- data
data$date <- as.Date(data$date)
data <- read.csv("C:\\Users\\bean_student\\Documents\\GraphData\\complete_data.csv")
data1 <- data
data$date <- as.Date(data$date)
sum(is.na(data$date))
sum(!is.na(data$date))
data1$date[which(is.na(data$date))]
as.Date("1/23/1966")
as.Date("12/23/1965")
View(data)
data <- read.csv("C:\\Users\\bean_student\\Documents\\GraphData\\complete_data.csv")
data <- read.csv("C:\\Users\\bean_student\\Documents\\GraphData\\complete_data.csv")
data1 <- data
data$date
data <- read.csv("C:\\Users\\bean_student\\Documents\\GraphData\\complete_data.csv")
data1 <- data
data$date <- as.Date(data$date, tryFormats = c("%Y-%m-%d", "%Y/%m/%d", "%d/%m/%Y", "%d-%m-%Y"))
sum(!is.na(data$date))
sum(is.na(data$date))
data1$date[which(is.na(data$date))]
View(data1)
which(is.na(data$date)
which(is.na(data$date))
which(is.na(data$date)
)
data <- read.csv("C:\\Users\\bean_student\\Documents\\GraphData\\complete_data.csv")
data1 <- data
data$date <- as.Date(data$date, tryFormats = c("%Y-%m-%d", "%Y/%m/%d", "%m/%d/%Y", "%m-%d-%Y"))
sum(is.na(data$date))
as.Date("12/23/1965", tryFormats = c("%Y-%m-%d", "%Y/%m/%d", "%m/%d/%Y", "%m-%d-%Y"))
data <- read.csv("C:\\Users\\bean_student\\Documents\\GraphData\\complete_data.csv")
data1 <- data
data$date <- as.Date(data$date)
sum(is.na(data$date))
data <- read.csv("C:\\Users\\bean_student\\Documents\\GraphData\\complete_data.csv")
data1 <- data
data$date <- as.Date(data$date, tryFormats = c("%Y-%m-%d", "%Y/%m/%d", "%m/%d/%Y", "%m-%d-%Y"))
sum(is.na(data$date))
data <- read.csv("C:\\Users\\bean_student\\Documents\\GraphData\\complete_data.csv")
data1 <- data
data$date <- as.Date(data$date, tryFormats = c("%Y-%m-%d", "%Y/%m/%d", "%m/%d/%Y", "%m-%d-%Y"))
View(data)
data <- read.csv("C:\\Users\\bean_student\\Documents\\GraphData\\complete_data.csv")
data1 <- data
data$date <- as.Date(data$date)
sum(is.na(data$date))
View(data)
######################## binding all data #####################################
library(dplyr)
folder_path <- "C:/Users/bean_student/Documents/GraphData/all_data"
pattern <- "*.csv"
# Get the list of CSV files in the folder
data_files <- list.files(path = folder_path, pattern = pattern, full.names = TRUE)
# Create an empty list to store the data frames
data_frames <- list()
# Loop through each CSV file and read it as a data frame
for (file in data_files) {
data_frames[[file]] <- read.csv(file)
}
complete_data <- bind_rows(data_frames)
write.table(complete_data,
file = "C:\\Users\\bean_student\\Documents\\GraphData\\complete_data.csv",
row.names = FALSE,
col.names = TRUE,
sep=",")
data <- read.csv("C:\\Users\\bean_student\\Documents\\GraphData\\complete_data.csv")
data1 <- data
data$date <- as.Date(data$date)
sum(is.na(data$date))
View(data)
nchar("fa")
sum(which(nchar(data$city_code) != 4))
sum(which(nchar(data$city_code) == 4))
nrow(data)
nchar(data$city_code[2090])
nchar(data$city_code)[1:40]
sum(nchar(data$city_code)) != 4
sum(nchar(data$city_code) != 4)
View(data[which(nchar(data$city_code) != 4),])
data <- read.csv("C:\\Users\\bean_student\\Documents\\GraphData\\complete_data.csv")
data <- read.csv("C:\\Users\\bean_student\\Documents\\GraphData\\complete_data.csv")
data1 <- data
data$date <- as.Date(data$date)
View(data)
sum(is.na(data$date))
######################## binding all data #####################################
library(dplyr)
folder_path <- "C:/Users/bean_student/Documents/GraphData/all_data"
pattern <- "*.csv"
# Get the list of CSV files in the folder
data_files <- list.files(path = folder_path, pattern = pattern, full.names = TRUE)
# Create an empty list to store the data frames
data_frames <- list()
# Loop through each CSV file and read it as a data frame
for (file in data_files) {
data_frames[[file]] <- read.csv(file)
}
complete_data <- bind_rows(data_frames)
write.table(complete_data,
file = "C:\\Users\\bean_student\\Documents\\GraphData\\complete_data.csv",
row.names = FALSE,
col.names = TRUE,
sep=",")
data <- read.csv("C:\\Users\\bean_student\\Documents\\GraphData\\complete_data.csv")
data1 <- data
data$date <- as.Date(data$date)
View(data)
sum(is.na(data$date))
sum(nchar(data$city_code) != 4)
sum(nchar(data$building_code) != 6)
sum(nchar(na.omit(data$building_code)) != 6)
sum(data$measurement == "roof" && is.na(data$mma))
sum(data$measurement == "roof" & is.na(data$mma))
View(data[which(data$measurement == "roof" & is.na(data$mma)),])
######################## binding all data #####################################
library(dplyr)
folder_path <- "C:/Users/bean_student/Documents/GraphData/all_data"
pattern <- "*.csv"
# Get the list of CSV files in the folder
data_files <- list.files(path = folder_path, pattern = pattern, full.names = TRUE)
# Create an empty list to store the data frames
data_frames <- list()
# Loop through each CSV file and read it as a data frame
for (file in data_files) {
data_frames[[file]] <- read.csv(file)
}
complete_data <- bind_rows(data_frames)
write.table(complete_data,
file = "C:\\Users\\bean_student\\Documents\\GraphData\\complete_data.csv",
row.names = FALSE,
col.names = TRUE,
sep=",")
data <- read.csv("C:\\Users\\bean_student\\Documents\\GraphData\\complete_data.csv")
data1 <- data
data$date <- as.Date(data$date)
sum(is.na(data$date))
sum(nchar(na.omit(data$building_code)) != 6)
sum(data$measurement == "roof" & is.na(data$mma))
View(data[which(data$measurement == "roof" & is.na(data$mma)),])
folder_path <- "C:/Users/bean_student/Documents/GraphData/all_data"
pattern <- "*.csv"
# Get the list of CSV files in the folder
data_files <- list.files(path = folder_path, pattern = pattern, full.names = TRUE)
# Create an empty list to store the data frames
data_frames <- list()
# Loop through each CSV file and read it as a data frame
for (file in data_files) {
data_frames[[file]] <- read.csv(file)
}
complete_data <- bind_rows(data_frames)
write.table(complete_data,
file = "C:\\Users\\bean_student\\Documents\\GraphData\\complete_data.csv",
row.names = FALSE,
col.names = TRUE,
sep=",")
data <- read.csv("C:\\Users\\bean_student\\Documents\\GraphData\\complete_data.csv")
data1 <- data
data$date <- as.Date(data$date)
data <- read.csv("C:\\Users\\bean_student\\Documents\\GraphData\\complete_data.csv")
data$date <- as.Date(data$date)
sum(is.na(data$date))
sum(data$measurement == "roof" & is.na(data$mma))
sum(nchar(na.omit(data$building_code)) != 6)
data <- read.csv("C:\\Users\\bean_student\\Documents\\GraphData\\complete_data.csv")
data1 <- data
data$date <- as.Date(data$date)
View(data)
sum(is.na(data$date))
data1$date[which(is.na(data$date))]
sum(which(nchar(data$city_code) == 4))
sum(nchar(na.omit(data$building_code)) != 6)
sum(data$measurement == "roof" & is.na(data$mma))
data <- read.csv("C:\\Users\\bean_student\\Documents\\GraphData\\complete_data.csv")
metadata <- read.csv("C:\\Users\\bean_student\\Documents\\GraphData\\gr_meta_ca_all.csv")
data$season <- rep(NA, nrow(data))
data <- read.csv("C:\\Users\\bean_student\\Documents\\GraphData\\complete_data.csv")
metadata <- read.csv("C:\\Users\\bean_student\\Documents\\GraphData\\gr_meta_ca_all.csv")
data$season <- rep(NA, nrow(data))
View(data)
library(data.table)
data <- read.csv("C:\\Users\\bean_student\\Documents\\GraphData\\complete_data.csv")
library(data.table)
data <- read.csv("C:\\Users\\bean_student\\Documents\\GraphData\\complete_data.csv")
metadata <- read.csv("C:\\Users\\bean_student\\Documents\\GraphData\\gr_meta_ca_all.csv")
data$season <- rep(NA, nrow(data))
dt <- data.table(data)
View(dt)
dt[ date >= as.IDate("1957-07-01") & date <= as.IDate("1958-07-1"), season := 2 ]
dt[ date >= as.IDate("1958-07-01") & date <= as.IDate("1959-07-1"), season := 3 ]
dt[ date >= as.IDate("1959-07-01") & date <= as.IDate("1960-07-1"), season := 4 ]
dt[ date >= as.IDate("1960-07-01") & date <= as.IDate("1961-07-1"), season := 5 ]
dt[ date >= as.IDate("1961-07-01") & date <= as.IDate("1962-07-1"), season := 6 ]
dt[ date >= as.IDate("1962-07-01") & date <= as.IDate("1963-07-1"), season := 7 ]
dt[ date >= as.IDate("1963-07-01") & date <= as.IDate("1964-07-1"), season := 8 ]
dt[ date >= as.IDate("1964-07-01") & date <= as.IDate("1965-07-1"), season := 9 ]
dt[ date >= as.IDate("1965-07-01") & date <= as.IDate("1966-07-1"), season := 10 ]
dt[ date >= as.IDate("1966-07-01") & date <= as.IDate("1967-07-1"), season := 11 ]
View(dt)
data$season <- ifelse(data$date >= as.Date("1957-07-01") & date <= as.Date("1958-07-01"), 2, data$date)
data <- read.csv("C:\\Users\\bean_student\\Documents\\GraphData\\complete_data.csv")
metadata <- read.csv("C:\\Users\\bean_student\\Documents\\GraphData\\gr_meta_ca_all.csv")
data$season <- rep(NA, nrow(data))
data$season <- ifelse(data$date >= as.Date("1957-07-01") & date <= as.Date("1958-07-01"), 2, data$date)
data$season <- ifelse(data$date > as.Date("1957-07-01") && date < as.Date("1958-07-01"), 2, data$date)
data$season <- ifelse(data$date > as.Date("1957-07-01") & date < as.Date("1958-07-01"), 2, data$season)
data <- read.csv("C:\\Users\\bean_student\\Documents\\GraphData\\complete_data.csv")
metadata <- read.csv("C:\\Users\\bean_student\\Documents\\GraphData\\gr_meta_ca_all.csv")
data$season <- rep(NA, nrow(data))
data$date <- as.Date(data$date)
data$season <- ifelse(data$date > as.Date("1957-07-01") & date < as.Date("1958-07-01"), 2, data$season)
data$season <- ifelse(data$date > as.Date("1957-07-01") && date < as.Date("1958-07-01"), 2, data$season)
data$season <- ifelse((data$date > as.Date("1957-07-01") && date < as.Date("1958-07-01")), 2, data$season)
data$season <- ifelse((data$date > as.Date("1957-07-01") & date < as.Date("1958-07-01")), 2, data$season)
data$season <- ifelse((data$date > as.Date("1957-07-01") & data$date < as.Date("1958-07-01")), 2, data$season)
View(data)
data$season <- ifelse((data$date > as.Date("1957-07-01") &
data$date < as.Date("1958-07-01")), 2, data$season)
data <- read.csv("C:\\Users\\bean_student\\Documents\\GraphData\\complete_data.csv")
metadata <- read.csv("C:\\Users\\bean_student\\Documents\\GraphData\\gr_meta_ca_all.csv")
data$season <- rep(NA, nrow(data))
data$date <- as.Date(data$date)
data$season <- ifelse((data$date > as.Date("1957-07-01") &
data$date < as.Date("1958-07-01")), 2, data$season)
data$season <- ifelse((data$date > as.Date("1958-07-01") &
data$date < as.Date("1959-07-01")), 3, data$season)
data$season <- ifelse((data$date > as.Date("1959-07-01") &
data$date < as.Date("1960-07-01")), 4, data$season)
data$season <- ifelse((data$date > as.Date("1960-07-01") &
data$date < as.Date("1961-07-01")), 5, data$season)
data$season <- ifelse((data$date > as.Date("1961-07-01") &
data$date < as.Date("1962-07-01")), 6, data$season)
data$season <- ifelse((data$date > as.Date("1962-07-01") &
data$date < as.Date("1963-07-01")), 7, data$season)
data$season <- ifelse((data$date > as.Date("1963-07-01") &
data$date < as.Date("1964-07-01")), 8, data$season)
data$season <- ifelse((data$date > as.Date("1964-07-01") &
data$date < as.Date("1965-07-01")), 9, data$season)
data$season <- ifelse((data$date > as.Date("1965-07-01") &
data$date < as.Date("1966-07-01")), 10, data$season)
data$season <- ifelse((data$date > as.Date("1966-07-01") &
data$date < as.Date("1967-07-01")), 11, data$season)
View(data)
################# summarise by building code and season #####################
library(dplyr)
data %>%
group_by(building_code, season) %>%
filter(measurement == "ground" | mma  == "avg")
data %>%
group_by(building_code, season) %>%
filter(measurement == "ground") %>%
summarise(max(value))
ground_max <- data %>%
group_by(building_code, season) %>%
filter(measurement == "ground") %>%
summarise(max(value))
View(ground_max)
ground_max <- data %>%
group_by(building_code, city_code, season) %>%
filter(measurement == "ground") %>%
summarise(max(value))
View(ground_max)
gr_max <- data %>%
group_by(building_code, season, measurement) %>%
filter(measurement == "ground" | mma == "avg") %>%
summarise(max(value))
View(gr_max)
ground_max <- data %>%
group_by(building_code, season) %>%
filter(measurement == "ground") %>%
summarise(max(value))
roof_max <- data %>%
group_by(building_code, season) %>%
filter(mma == "avg") %>%
summarise(max(value))
View(ground_max)
ground_max <- data %>%
group_by(building_code, season) %>%
filter(measurement == "ground") %>%
summarise(groun_max = max(value))
ground_max <- data %>%
group_by(building_code, season) %>%
filter(measurement == "ground") %>%
summarise(ground_max = max(value))
View(ground_max)
roof_max <- data %>%
group_by(building_code, season) %>%
filter(mma == "avg") %>%
summarise(roof_max = max(value))
View(roof_max)
gr_data <- inner_join(ground_max, roof_max, by = c("building_code", "season"))
View(gr_data)
gr_data$gr <- gr_data$roof_max / gr_data$ground_max
View(gr_data)
